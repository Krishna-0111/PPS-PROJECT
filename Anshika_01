#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// Assume donations[] and requests[] are globally available
extern struct Donation donations[];
extern int donationCount;
extern struct Request requests[];
extern int requestCount;

void distributeFood() {
    printf("\n--- Distribution Started ---\n");

    for (int i = 0; i < requestCount; i++) {
        Request r = requests[i];
        printf("Processing request %d (Priority %d)...\n", i + 1, r.priority);

        for (int j = 0; j < donationCount; j++) {
            Donation *d = &donations[j];

            if (d->quantity > 0 && !d->isExpired) {
                int allocated = r.familySize * 2; // Simple logic
                if (allocated > d->quantity) allocated = d->quantity;

                printf("Allocated %d of %s to request %d\n", allocated, d->itemType, i + 1);
                d->quantity -= allocated;
                break;
            }
        }
    }

    printf("Distribution complete.\n");
}
